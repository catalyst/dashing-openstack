<% content_for :title do %>Openstack Cluster<% end %>
<script>
refresh_secs = getQueryVariable('refresh');

function getQueryVariable(variable) {
  var query = window.location.search.substring(1);
  var vars = query.split("&");
  for (var i=0;i<vars.length;i++) {
    var pair = vars[i].split("=");
    if (pair[0] == variable) {
      return pair[1];
    }
  }
}

function refresh() {
  window.location.reload(true);
  setTimeout(refresh, refresh_secs * 1000);
}

if (refresh_secs != null)
  window.onload=setTimeout(refresh, refresh_secs * 1000);

</script>
<div class="gridster">
  <ul>
    <li data-row="1" data-col="1" data-sizex="1" data-sizey="1">
      <div data-id="openstack" data-view="Image" data-title="logo" data-image="/logo.png" data-width="250px"></div>
    </li>
    <li data-row="1" data-col="2" data-sizex="1" data-sizey="1">
      <div data-id="nagios-prod" data-view="Nagios" data-unordered="true" data-title="Icinga Prod" data-moreinfo="Unacknowledged events"></div>
    </li>
    <li data-row="1" data-col="3" data-sizex="1" data-sizey="1">
      <div data-id="vcpus-hypervisor" data-view="Meter" data-title="Hypervisor VCPUs"></div>
    </li>
    <li data-row="1" data-col="4" data-sizex="1" data-sizey="1">
      <div data-id="ram-hypervisor" data-view="Meter" data-title="Hypervisor Memory"></div>
    </li>
    <li data-row="2" data-col="1" data-sizex="1" data-sizey="1">
      <div data-id="cores-tenant" data-view="ProgressBars" data-title="VCPUs"></div>
    </li>
    <li data-row="2" data-col="2" data-sizex="1" data-sizey="1">
      <div data-id="instances-tenant" data-view="ProgressBars" data-title="Instances"></div>
    </li>
    <li data-row="2" data-col="3" data-sizex="1" data-sizey="1">
      <div data-id="ram-tenant" data-view="ProgressBars" data-title="Memory"></div>
    </li>
    <li data-row="2" data-col="4" data-sizex="1" data-sizey="1">
      <div data-id="floatingips-tenant" data-view="ProgressBars" data-title="Floating IPs"></div>
    </li>
  </ul>
</div>
